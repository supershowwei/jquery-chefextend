function findKeyElement(e,t){var r="[c-model='"+t+"'],[c-model-number='"+t+"'],[c-model-dazzle*='value:"+t+"'],[c-model-dazzle*='value-number:"+t+"']";return e.find(r).addBack(r)}function resolveModelValue(e,t){if(null!=t){if(/`[^`]+`/.test(e)){var r,n,o=/\{([^\{\}]+)\}/g,i=void 0,a=e.replace(/`/g,"");do{(i=o.exec(a))&&(r=i[1],n=new RegExp(i[0],"g"),a=a.replace(n,resolveModelValue(r,t)))}while(i);return a}if(/[^\.]\.[^\.]/.test(e)){var l=e.indexOf(".");return resolveModelValue(e.substr(l+1),t[e.substr(0,l)])}return t[e]}}function buildModelValue(e,t,r){var n,o;/[^\.]\.[^\.]/.test(e)?(n=e.indexOf("."),void 0!==r[o=e.substr(0,n)]&&null!==r[o]||(r[o]={}),buildModelValue(e.substr(n+1),t,r[o])):r[e]=t}function getContents(e){if(null!=e)return e.constructor===Function?e():e}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substring(!t||t<0?0:+t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Array.prototype.contains||(Array.prototype.contains=function(e,t){var r=this,n=r.length,o=-1;if(void 0===t){for(;++o!==n;)if(o in r&&e(r[o],o,r))return!0}else for(;++o!==n;)if(o in r&&e.call(t,r[o],o,r))return!0;return!1}),function(v){v.expr[":"].attrStartsWith=v.expr.createPseudo(function(o){return function(e,t,r){for(var n=e.attributes.length-1;0<=n;n--)if(e.attributes[n].name.startsWith(o))return!0;return!1}}),v.expr[":"].attrEndsWith=v.expr.createPseudo(function(o){return function(e,t,r){for(var n=e.attributes.length-1;0<=n;n--)if(e.attributes[n].name.endsWith(o))return!0;return!1}}),v.extend({jqModel:{toNumber:function(e){return isNaN(e)?void 0:Number(e)}}}),v.fn.extend({getModelValue:function(){return this.is(":radio")?v("input[type='radio'][name='"+this.attr("name")+"']:checked").val():this.is(":checkbox")?this.attr("value")?this.prop("checked")?this.val():void 0:this.prop("checked"):this.val()},setModelValue:function(e){this.is(":radio")?v("input[type='radio'][name='"+this.attr("name")+"'][value='"+e+"']").prop("checked",!0):this.is(":checkbox")?this.attr("value")?this.prop("checked",this.val()===e.toString()):this.prop("checked",e):this.val(e)},model:function(d,e,t){var r,n=this.find(":attrStartsWith('c-model')").addBack(":attrStartsWith('c-model')");if(0!==n.length){if(!d){var s={};return v.each(n,function(e,t){var r=v(t);if(r.is(":input"))for(var n=t.attributes.length-1;0<=n;n--){var o=t.attributes[n];if(o.name.startsWith("c-model")){if("c-model-dazzle"===o.name){var i,a,l,u=/,(value|value-number):([^:,]+)/.exec(o.value)||/^(value|value-number):([^:,]+)/.exec(o.value);u&&(i=u[1],void 0===resolveModelValue(a=u[2],s)&&void 0!==(l=r.getModelValue())&&buildModelValue(a,"value-number"===i?v.jqModel.toNumber(l):l,s));break}void 0===resolveModelValue(o.value,s)&&void 0!==(l=r.getModelValue())&&("c-model-number"===o.name?buildModelValue(o.value,v.jqModel.toNumber(l),s):buildModelValue(o.value,l,s));break}}}),s}d.constructor===String?((r={})[d]=e,d=r):d.constructor===Object&&(t=e);var o=void 0;return t&&t.constructor===Object&&(o=t.beforeSet,t=t.afterSet),o&&o.constructor===Function&&o(this,d),v.each(n,function(e,t){for(var r=t.attributes.length-1;0<=r;r--){var n=t.attributes[r];if(n.name.startsWith("c-model")){var o,i=v(t);if("c-model-dazzle"===n.name){var a=/([^:,]+):(`.+`|[^:,]+)/g,l=void 0;do{if(l=a.exec(n.value)){var u,s=l[1];if(void 0!==(u=resolveModelValue(l[2],d)))switch(s){case"text":i.text(getContents(u));break;case"html":i.html(getContents(u));break;case"value":case"value-number":i.is(":input")?i.setModelValue(u):i.attr("value",u);break;default:i.attr(s,getContents(u))}}}while(l);break}if("c-model-html"===n.name){void 0!==(o=getContents(resolveModelValue(n.value,d)))&&i.html(o);break}i.is(":input")?void 0!==(u=resolveModelValue(n.value,d))&&i.setModelValue(u):void 0!==(o=getContents(resolveModelValue(n.value,d)))&&i.text(o);break}}}),t&&t.constructor===Function&&t(this,d),this}},models:function(e,r,i){var n,a=this;if(0!==a.length){if(!e){var o=[];return v.each(a,function(e,t){o.push(v(t).model())}),o}if(e.constructor===Object)for(var l,t=e[l=r].toString(),u=0;u<a.length;u++){if(findKeyElement(s=v(a[u]),l).getModelValue()===t){s.model(e,i);break}}else if(e.constructor===Array){r.constructor===String?(l=r,v.each(e,function(e,t){for(var r=t[l].toString(),n=0;n<a.length;n++){var o=v(a[n]);if(findKeyElement(o,l).getModelValue()===r){o.model(t,i);break}}n<a.length&&a.splice(n,1)})):r instanceof jQuery&&(n=v(a),v.each(e,function(e,t){r.clone().model(t,i).appendTo(n)}))}else for(var s,d=e,c=r.toString(),u=0;u<a.length;u++){if(findKeyElement(s=v(a[u]),d).getModelValue()===c)return s.model()}return this}}})}(jQuery);