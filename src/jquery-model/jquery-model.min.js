function findKeyElement(e,t){return e.find("[c-model='"+t+"'],[c-model-number='"+t+"']")}function resolveModelValue(e,t){if(null!=t){if(/[^\.]\.[^\.]/.test(e)){var r=e.indexOf(".");return resolveModelValue(e.substr(r+1),t[e.substr(0,r)])}return t[e]}}function buildModelValue(e,t,r){if(/[^\.]\.[^\.]/.test(e)){var i=e.indexOf("."),n=e.substr(0,i);void 0!==r[n]&&null!==r[n]||(r[n]={}),buildModelValue(e.substr(i+1),t,r[n])}else r[e]=t}function getContents(e){if(null!=e)return e.constructor===Function?e():e}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substring(!t||t<0?0:+t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),function(f){f.expr[":"].attrStartsWith=f.expr.createPseudo(function(n){return function(e,t,r){for(var i=e.attributes.length-1;0<=i;i--)if(e.attributes[i].name.startsWith(n))return!0;return!1}}),f.expr[":"].attrEndsWith=f.expr.createPseudo(function(n){return function(e,t,r){for(var i=e.attributes.length-1;0<=i;i--)if(e.attributes[i].name.endsWith(n))return!0;return!1}}),f.extend({jqModel:{toNumber:function(e){return isNaN(e)?void 0:Number(e)}}}),f.fn.extend({getModelValue:function(){return this.is(":radio")?f("input[type='radio'][name='"+this.attr("name")+"']:checked").val():this.is(":checkbox")?this.attr("value")?this.prop("checked")?this.val():void 0:this.prop("checked"):this.val()},setModelValue:function(e){this.is(":radio")?f("input[type='radio'][name='"+this.attr("name")+"'][value='"+e+"']").prop("checked",!0):this.is(":checkbox")?this.attr("value")?this.prop("checked",this.val()===e):this.prop("checked",e):this.val(e)},model:function(d,e,t){var r=this.find(":attrStartsWith('c-model')").addBack(":attrStartsWith('c-model')");if(0!==r.length){if(!d){var s={};return f.each(r,function(e,t){var r=f(t);if(r.is(":input"))for(var i=t.attributes.length-1;0<=i;i--){var n=t.attributes[i];if(n.name.startsWith("c-model")){if("c-model-dazzle"===n.name){var o=/(value[^:,]*):([^:,]+)/.exec(n.value);if(o){var a=o[1],l=o[2];if(void 0===resolveModelValue(l,s))void 0!==(u=r.getModelValue())&&buildModelValue(l,"value-number"===a?f.jqModel.toNumber(u):u,s)}break}var u;if(void 0===resolveModelValue(n.value,s))void 0!==(u=r.getModelValue())&&("c-model-number"===n.name?buildModelValue(n.value,f.jqModel.toNumber(u),s):buildModelValue(n.value,u,s));break}}}),s}if(d.constructor===String){var i={};i[d]=e,d=i}else d.constructor===Object&&(t=e);var n=void 0;return t&&t.constructor===Object&&(n=t.beforeSet,t=t.afterSet),n&&n.constructor===Function&&n(this,d),f.each(r,function(e,t){for(var r=t.attributes.length-1;0<=r;r--){var i=t.attributes[r];if(i.name.startsWith("c-model")){var n=f(t);if("c-model-dazzle"===i.name){var o=/([^:,]+):([^:,]+)/g,a=void 0;do{if(a=o.exec(i.value)){var l,u=a[1];if(void 0!==(l=resolveModelValue(a[2],d)))switch(u){case"text":n.text(getContents(l));break;case"value":case"value-number":n.is(":input")&&n.setModelValue(l);break;default:n.attr(u,getContents(l))}}}while(a);break}if("c-model-html"===i.name){var s;void 0!==(s=getContents(resolveModelValue(i.value,d)))&&n.html(s);break}if(n.is(":input"))void 0!==(l=resolveModelValue(i.value,d))&&n.setModelValue(l);else void 0!==(s=getContents(resolveModelValue(i.value,d)))&&n.text(s);break}}}),t&&t.constructor===Function&&t(this,d),this}},models:function(e,r,o){var a=this;if(0!==a.length){if(!e){var i=[];return f.each(a,function(e,t){i.push(f(t).model())}),i}if(e.constructor===Object)for(var t=e[l=r].toString(),n=0;n<a.length;n++){if(findKeyElement(c=f(a[n]),l).getModelValue()===t){c.model(e,o);break}}else if(e.constructor===Array){if(r.constructor===String){var l=r;f.each(e,function(e,t){for(var r=t[l].toString(),i=0;i<a.length;i++){var n=f(a[i]);if(findKeyElement(n,l).getModelValue()===r){n.model(t,o);break}}i<a.length&&a.splice(i,1)})}else if(r instanceof jQuery){var u=f(a);f.each(e,function(e,t){r.clone().model(t,o).appendTo(u)})}}else{var s=e,d=r.toString();for(n=0;n<a.length;n++){var c;if(findKeyElement(c=f(a[n]),s).getModelValue()===d)return c.model()}}return this}}})}(jQuery);