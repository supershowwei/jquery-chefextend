function findKeyElement(e,t){return e.find("[c-model='"+t+"'],[c-model-number='"+t+"'],[c-model-dazzle*='value:"+t+"'],[c-model-dazzle*='value-number:"+t+"']")}function resolveModelValue(e,t){if(null!=t){if(/[^\.]\.[^\.]/.test(e)){var r=e.indexOf(".");return resolveModelValue(e.substr(r+1),t[e.substr(0,r)])}return t[e]}}function buildModelValue(e,t,r){if(/[^\.]\.[^\.]/.test(e)){var n=e.indexOf("."),i=e.substr(0,n);void 0!==r[i]&&null!==r[i]||(r[i]={}),buildModelValue(e.substr(n+1),t,r[i])}else r[e]=t}function getContents(e){if(null!=e)return e.constructor===Function?e():e}String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substring(!t||t<0?0:+t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Array.prototype.contains||(Array.prototype.contains=function(e,t){var r=this,n=r.length,i=-1;if(void 0===t){for(;++i!==n;)if(i in r&&e(r[i],i,r))return!0}else for(;++i!==n;)if(i in r&&e.call(t,r[i],i,r))return!0;return!1}),function(f){f.expr[":"].attrStartsWith=f.expr.createPseudo(function(i){return function(e,t,r){for(var n=e.attributes.length-1;0<=n;n--)if(e.attributes[n].name.startsWith(i))return!0;return!1}}),f.expr[":"].attrEndsWith=f.expr.createPseudo(function(i){return function(e,t,r){for(var n=e.attributes.length-1;0<=n;n--)if(e.attributes[n].name.endsWith(i))return!0;return!1}}),f.extend({jqModel:{toNumber:function(e){return isNaN(e)?void 0:Number(e)}}}),f.fn.extend({getModelValue:function(){return this.is(":radio")?f("input[type='radio'][name='"+this.attr("name")+"']:checked").val():this.is(":checkbox")?this.attr("value")?this.prop("checked")?this.val():void 0:this.prop("checked"):this.val()},setModelValue:function(e){this.is(":radio")?f("input[type='radio'][name='"+this.attr("name")+"'][value='"+e+"']").prop("checked",!0):this.is(":checkbox")?this.attr("value")?this.prop("checked",this.val()===e.toString()):this.prop("checked",e):this.val(e)},model:function(d,e,t){var r=this.find(":attrStartsWith('c-model')").addBack(":attrStartsWith('c-model')");if(0!==r.length){if(!d){var s={};return f.each(r,function(e,t){var r=f(t);if(r.is(":input"))for(var n=t.attributes.length-1;0<=n;n--){var i=t.attributes[n];if(i.name.startsWith("c-model")){if("c-model-dazzle"===i.name){var o=/(value[^:,]*):([^:,]+)/.exec(i.value);if(o){var a=o[1],l=o[2];if(void 0===resolveModelValue(l,s))void 0!==(u=r.getModelValue())&&buildModelValue(l,"value-number"===a?f.jqModel.toNumber(u):u,s)}break}var u;if(void 0===resolveModelValue(i.value,s))void 0!==(u=r.getModelValue())&&("c-model-number"===i.name?buildModelValue(i.value,f.jqModel.toNumber(u),s):buildModelValue(i.value,u,s));break}}}),s}if(d.constructor===String){var n={};n[d]=e,d=n}else d.constructor===Object&&(t=e);var i=void 0;return t&&t.constructor===Object&&(i=t.beforeSet,t=t.afterSet),i&&i.constructor===Function&&i(this,d),f.each(r,function(e,t){for(var r=t.attributes.length-1;0<=r;r--){var n=t.attributes[r];if(n.name.startsWith("c-model")){var i=f(t);if("c-model-dazzle"===n.name){var o=/([^:,]+):([^:,]+)/g,a=void 0;do{if(a=o.exec(n.value)){var l,u=a[1];if(void 0!==(l=resolveModelValue(a[2],d)))switch(u){case"text":i.text(getContents(l));break;case"html":i.html(getContents(l));break;case"value":case"value-number":i.is(":input")&&i.setModelValue(l);break;default:i.attr(u,getContents(l))}}}while(a);break}if("c-model-html"===n.name){var s;void 0!==(s=getContents(resolveModelValue(n.value,d)))&&i.html(s);break}if(i.is(":input"))void 0!==(l=resolveModelValue(n.value,d))&&i.setModelValue(l);else void 0!==(s=getContents(resolveModelValue(n.value,d)))&&i.text(s);break}}}),t&&t.constructor===Function&&t(this,d),this}},models:function(e,r,o){var a=this;if(0!==a.length){if(!e){var n=[];return f.each(a,function(e,t){n.push(f(t).model())}),n}if(e.constructor===Object)for(var t=e[l=r].toString(),i=0;i<a.length;i++){if(findKeyElement(c=f(a[i]),l).getModelValue()===t){c.model(e,o);break}}else if(e.constructor===Array){if(r.constructor===String){var l=r;f.each(e,function(e,t){for(var r=t[l].toString(),n=0;n<a.length;n++){var i=f(a[n]);if(findKeyElement(i,l).getModelValue()===r){i.model(t,o);break}}n<a.length&&a.splice(n,1)})}else if(r instanceof jQuery){var u=f(a);f.each(e,function(e,t){r.clone().model(t,o).appendTo(u)})}}else{var s=e,d=r.toString();for(i=0;i<a.length;i++){var c;if(findKeyElement(c=f(a[i]),s).getModelValue()===d)return c.model()}}return this}}})}(jQuery);