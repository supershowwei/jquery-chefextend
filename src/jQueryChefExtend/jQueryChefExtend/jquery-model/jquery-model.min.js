function escapeRegExp(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return this.substring(!t||t<0?0:+t,n.length)===n});String.prototype.endsWith||(String.prototype.endsWith=function(n,t){return(t===undefined||t>this.length)&&(t=this.length),this.substring(t-n.length,t)===n});Array.prototype.contains||(Array.prototype.contains=function(n,t){const r=this,u=r.length;let i=-1;if(t===undefined){while(++i!==u)if(i in r&&n(r[i],i,r))return!0}else while(++i!==u)if(i in r&&n.call(t,r[i],i,r))return!0;return!1}),function(n){const f=/[^\.\|]\.[^\.\|]/,s=/`([^`]+)`/,h=/\{([^\{\}]+)\}/,c=/\|[^\|]+/,l=/,(value|value-number):([^:,]+)/,a=/^(value|value-number):([^:,]+)/,v=/([^:,]+):(`[^`]+`|[^:,]+)/g,y=/\|([^\s]+)$/,p=/\|([^\s]+) \? (.+)$/,w=/^'([^']+)'$/,u=function(n,t){const i="[c-model='"+t+"'],[c-model-number='"+t+"'],[c-model-dazzle*='value:"+t+"'],[c-model-dazzle*='value-number:"+t+"']";return n.find(i).addBack(i)},b=function(n){let t=undefined;if(t=y.exec(n))return{method:t[1],arguments:[]};if(t=p.exec(n)){const n=t[1],i=t[2].split(" & ").reduce((n,t)=>{let i=undefined;return(i=w.exec(t))?n.push(i[1]):n.push(Number(t)),n},[]);return{method:n,arguments:i}}return undefined},e=function(n){let t=undefined;do if(t=c.exec(n.name)){const i=b(t[0]);i&&n.filters.push(i);n.name=n.name.replace(t[0],"")}while(t)},o=function(n){n.value!==undefined&&n.value!==null&&n.filters.length&&(n.value=n.filters.reduce((n,t)=>{if(t.method.includes("(")||t.method.includes(")"))return n;if(t.method.startsWith(".")){const i=t.method.substring(1);if(n[i])return n[i].apply(n,t.arguments)}else{const i=new Function(`return ${t.method};`)();if(typeof i=="function")return i.call(null,n,...t.arguments)}return n},n.value))},t=function(n,i){if(i===undefined||i===null)return undefined;const u=s.exec(n);if(u){let n=undefined,r=u[1];do if(n=h.exec(r)){const u={name:n[1],filters:[]};if(e(u),u.value=t(u.name,i),u.value===undefined)return undefined;o(u);r=r.replace(new RegExp(escapeRegExp(n[0]),"g"),u.value)}while(n);return r}if(f.test(n)){const r=n.indexOf(".");return t(n.substr(r+1),i[n.substr(0,r)])}const r={name:n,filters:[]};return e(r),r.value=i[r.name],o(r),r.value},i=function(n,t,r){if(f.test(n)){const f=n.indexOf("."),u=n.substr(0,f);(r[u]===undefined||r[u]===null)&&(r[u]={});i(n.substr(f+1),t,r[u])}else r[n]=t},r=function(n){return n===undefined||n===null?undefined:n.constructor===Function?n():n};n.expr[":"].attrStartsWith=n.expr.createPseudo(function(n){return function(t){for(let i=t.attributes.length-1;i>=0;i--)if(t.attributes[i].name.startsWith(n))return!0;return!1}});n.expr[":"].attrEndsWith=n.expr.createPseudo(function(n){return function(t){for(let i=t.attributes.length-1;i>=0;i--)if(t.attributes[i].name.endsWith(n))return!0;return!1}});n.extend({jqModel:{toNumber:function(n){return n===""?undefined:n.trim().length<1?undefined:isNaN(n)?undefined:Number(n)}}});n.fn.extend({getModelValue:function(){return this.is(":radio")?n("input[type='radio'][name='"+this.attr("name")+"']:checked").val():this.is(":checkbox")?this.attr("value")?this.prop("checked")?this.val():undefined:this.prop("checked"):this.val()},setModelValue:function(t){this.is(":radio")?n("input[type='radio'][name='"+this.attr("name")+"']").prop("checked",!1).filter("[value='"+t+"']").prop("checked",!0):this.is(":checkbox")?this.attr("value")?this.prop("checked",this.val()===t.toString()):this.prop("checked",t):this.val(t)},model:function(u,f,e,o){const s=this.find(":attrStartsWith('c-model')").addBack(":attrStartsWith('c-model')");if(s.length===0)return undefined;if(u){if(u.constructor===String){const n={};n[u]=f;u=n}else u.constructor===Object&&(e=f);let i=undefined;e&&e.constructor===Object&&(i=e.beforeSet,e=e.afterSet);i&&i.constructor===Function&&i(this,u,o);n.each(s,function(i,f){for(let i=f.attributes.length-1;i>=0;i--){const o=f.attributes[i];if(o.name.startsWith("c-model")){const e=n(f);if(o.name==="c-model-dazzle"){let n=undefined;do if(n=v.exec(o.value)){const f=n[1],o=n[2],i=t(o,u);if(i!==undefined)switch(f){case"text":e.text(r(i));break;case"html":e.html(r(i));break;case"value":case"value-number":e.is(":input")?e.setModelValue(i):e.attr("value",i);break;default:e.attr(f,r(i))}}while(n);break}if(o.name==="c-model-html"){const n=r(t(o.value,u));n!==undefined&&e.html(n);break}if(e.is(":input")){const n=t(o.value,u);n!==undefined&&e.setModelValue(n)}else{const n=r(t(o.value,u));n!==undefined&&e.text(n)}break}}});e&&e.constructor===Function&&e(this,u,o)}else{const r={};return n.each(s,function(u,f){const e=n(f);if(e.is(":input"))for(let u=f.attributes.length-1;u>=0;u--){const o=f.attributes[u];if(o.name.startsWith("c-model")){if(o.name==="c-model-dazzle"){const u=l.exec(o.value)||a.exec(o.value);if(u){const o=u[1],f=u[2];if(t(f,r)===undefined){const t=e.getModelValue();t!==undefined&&(o==="value-number"?i(f,n.jqModel.toNumber(t),r):i(f,t,r))}}break}if(t(o.value,r)===undefined){const t=e.getModelValue();t!==undefined&&(o.name==="c-model-number"?i(o.value,n.jqModel.toNumber(t),r):i(o.value,t,r))}break}}}),r}return this},models:function(t,i,r){const f=this;if(f.length===0)return undefined;if(t)if(t.constructor===Object){const e=i,o=t[e].toString();for(let i=0;i<f.length;i++){const s=n(f[i]),h=u(s,e);if(h.getModelValue()===o){s.model(t,r);break}}}else if(t.constructor===Array){if(i.constructor===String){const e=i;n.each(t,function(t,i){const s=i[e].toString();let o=0;for(;o<f.length;o++){const h=n(f[o]),c=u(h,e);if(c.getModelValue()===s){h.model(i,r,undefined,t);break}}o<f.length&&f.splice(o,1)})}else if(i instanceof jQuery){const u=n(f);n.each(t,function(n,t){i.clone().model(t,r,undefined,n).appendTo(u)})}else if(i.constructor===Function){const u=n(f);n.each(t,function(n,t){i(t,n).clone().model(t,r,undefined,n).appendTo(u)})}}else{const r=t,e=i.toString();for(let t=0;t<f.length;t++){const i=n(f[t]),o=u(i,r);if(o.getModelValue()===e)return i.model()}}else{const t=[];return n.each(f,function(i,r){t.push(n(r).model())}),t}return this}})}(jQuery);