function findKeyElement(n,t){const i="[c-model='"+t+"'],[c-model-number='"+t+"'],[c-model-dazzle*='value:"+t+"'],[c-model-dazzle*='value-number:"+t+"']";return n.find(i).addBack(i)}function resolveModelValue(n,t){if(t===undefined||t===null)return undefined;if(/`[^`]+`/.test(n)){let i=undefined,r=n.replace(/`/g,"");do if(i=/\{([^\{\}]+)\}/.exec(r),i){const u=i[1],f=new RegExp(i[0],"g"),n=resolveModelValue(u,t);if(n===undefined)return undefined;r=r.replace(f,n)}while(i);return r}if(/[^\.]\.[^\.]/.test(n)){const i=n.indexOf(".");return resolveModelValue(n.substr(i+1),t[n.substr(0,i)])}return t[n]}function buildModelValue(n,t,i){if(/[^\.]\.[^\.]/.test(n)){const u=n.indexOf("."),r=n.substr(0,u);(i[r]===undefined||i[r]===null)&&(i[r]={});buildModelValue(n.substr(u+1),t,i[r])}else i[n]=t}function getContents(n){return n===undefined||n===null?undefined:n.constructor===Function?n():n}String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return this.substring(!t||t<0?0:+t,n.length)===n});String.prototype.endsWith||(String.prototype.endsWith=function(n,t){return(t===undefined||t>this.length)&&(t=this.length),this.substring(t-n.length,t)===n});Array.prototype.contains||(Array.prototype.contains=function(n,t){const r=this,u=r.length;let i=-1;if(t===undefined){while(++i!==u)if(i in r&&n(r[i],i,r))return!0}else while(++i!==u)if(i in r&&n.call(t,r[i],i,r))return!0;return!1}),function(n){n.expr[":"].attrStartsWith=n.expr.createPseudo(function(n){return function(t){for(let i=t.attributes.length-1;i>=0;i--)if(t.attributes[i].name.startsWith(n))return!0;return!1}});n.expr[":"].attrEndsWith=n.expr.createPseudo(function(n){return function(t){for(let i=t.attributes.length-1;i>=0;i--)if(t.attributes[i].name.endsWith(n))return!0;return!1}});n.extend({jqModel:{toNumber:function(n){return isNaN(n)?undefined:Number(n)}}});n.fn.extend({getModelValue:function(){return this.is(":radio")?n("input[type='radio'][name='"+this.attr("name")+"']:checked").val():this.is(":checkbox")?this.attr("value")?this.prop("checked")?this.val():undefined:this.prop("checked"):this.val()},setModelValue:function(t){this.is(":radio")?n("input[type='radio'][name='"+this.attr("name")+"'][value='"+t+"']").prop("checked",!0):this.is(":checkbox")?this.attr("value")?this.prop("checked",this.val()===t.toString()):this.prop("checked",t):this.val(t)},model:function(t,i,r,u){const f=this.find(":attrStartsWith('c-model')").addBack(":attrStartsWith('c-model')");if(f.length===0)return undefined;if(t){if(t.constructor===String){const n={};n[t]=i;t=n}else t.constructor===Object&&(r=i);let e=undefined;r&&r.constructor===Object&&(e=r.beforeSet,r=r.afterSet);e&&e.constructor===Function&&e(this,t,u);n.each(f,function(i,r){for(let i=r.attributes.length-1;i>=0;i--){const f=r.attributes[i];if(f.name.startsWith("c-model")){const u=n(r);if(f.name==="c-model-dazzle"){const i=/([^:,]+):(`[^`]+`|[^:,]+)/g;let n=undefined;do if(n=i.exec(f.value),n){const r=n[1],f=n[2],i=resolveModelValue(f,t);if(i!==undefined)switch(r){case"text":u.text(getContents(i));break;case"html":u.html(getContents(i));break;case"value":case"value-number":u.is(":input")?u.setModelValue(i):u.attr("value",i);break;default:u.attr(r,getContents(i))}}while(n);break}if(f.name==="c-model-html"){const n=getContents(resolveModelValue(f.value,t));n!==undefined&&u.html(n);break}if(u.is(":input")){const n=resolveModelValue(f.value,t);n!==undefined&&u.setModelValue(n)}else{const n=getContents(resolveModelValue(f.value,t));n!==undefined&&u.text(n)}break}}});r&&r.constructor===Function&&r(this,t,u)}else{const t={};return n.each(f,function(i,r){const u=n(r);if(u.is(":input"))for(let i=r.attributes.length-1;i>=0;i--){const f=r.attributes[i];if(f.name.startsWith("c-model")){if(f.name==="c-model-dazzle"){const i=/,(value|value-number):([^:,]+)/.exec(f.value)||/^(value|value-number):([^:,]+)/.exec(f.value);if(i){const f=i[1],r=i[2];if(resolveModelValue(r,t)===undefined){const i=u.getModelValue();i!==undefined&&(f==="value-number"?buildModelValue(r,n.jqModel.toNumber(i),t):buildModelValue(r,i,t))}}break}if(resolveModelValue(f.value,t)===undefined){const i=u.getModelValue();i!==undefined&&(f.name==="c-model-number"?buildModelValue(f.value,n.jqModel.toNumber(i),t):buildModelValue(f.value,i,t))}break}}}),t}return this},models:function(t,i,r){const u=this;if(u.length===0)return undefined;if(t)if(t.constructor===Object){const f=i,e=t[f].toString();for(let i=0;i<u.length;i++){const o=n(u[i]),s=findKeyElement(o,f);if(s.getModelValue()===e){o.model(t,r);break}}}else if(t.constructor===Array){if(i.constructor===String){const f=i;n.each(t,function(t,i){const o=i[f].toString();let e=0;for(;e<u.length;e++){const s=n(u[e]),h=findKeyElement(s,f);if(h.getModelValue()===o){s.model(i,r,undefined,t);break}}e<u.length&&u.splice(e,1)})}else if(i instanceof jQuery){const f=n(u);n.each(t,function(n,t){i.clone().model(t,r,undefined,n).appendTo(f)})}}else{const r=t,f=i.toString();for(let t=0;t<u.length;t++){const i=n(u[t]),e=findKeyElement(i,r);if(e.getModelValue()===f)return i.model()}}else{const t=[];return n.each(u,function(i,r){t.push(n(r).model())}),t}return this}})}(jQuery);