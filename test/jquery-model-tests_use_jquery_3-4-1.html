<!DOCTYPE html>
<html lang="zh-TW">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>jquery-model-test</title>
</head>

<body>
    <div id="Test_TextInput_Set_and_Get_Text_and_Number_values">
        <h3></h3>
        <input type="text" c-model-number="id">
        <input type="text" c-model="name">
    </div>

    <div id="Test_Model_Set_Values_use_KeyValue">
        <h3></h3>
        <input type="text" c-model-number="id">
        <input type="text" c-model="name">
    </div>

    <div id="Test_Radio_Set_and_Get_Text_value">
        <h3></h3>
        <input type="radio" name="time_Period" value="morning" c-model="timePeriod" />早上
        <input type="radio" name="time_Period" value="noon" />中午
        <input type="radio" name="time_Period" value="night" />晚上
    </div>

    <div id="Test_Radio_Set_and_Get_Number_value">
        <h3></h3>
        <input type="radio" name="amount" value="1" c-model-number="amount" />1
        <input type="radio" name="amount" value="2" />2
        <input type="radio" name="amount" value="3" />3
    </div>

    <div id="Test_Checkbox_Set_and_Get_without_Value">
        <h3></h3>
        <input type="checkbox" c-model="creamer" />奶精
        <input type="checkbox" c-model="sugar" />糖
        <input type="checkbox" c-model="cinnamonPowder" />肉桂粉
    </div>

    <div id="Test_Checkbox_Set_and_Get_with_Number_Values">
        <h3></h3>
        <input type="checkbox" value="1" c-model-number="answer1" />1
        <input type="checkbox" value="2" c-model-number="answer2" />2
        <input type="checkbox" value="3" c-model-number="answer3" />3
    </div>

    <div id="Test_Checkbox_Set_and_Get_with_Text_Values">
        <h3></h3>
        <input type="checkbox" value="A" c-model="answer1" />A
        <input type="checkbox" value="B" c-model="answer2" />B
        <input type="checkbox" value="C" c-model="answer3" />C
    </div>

    <div id="Test_Select_Set_and_Get_with_Text_Values">
        <h3></h3>
        <select c-model="drink">
            <option value="coffee">Coffee</option>
            <option value="tea">Tea</option>
            <option value="me">Me</option>
        </select>
    </div>

    <div id="Test_Select_Set_and_Get_with_Number_Values">
        <h3></h3>
        <select c-model-number="answer">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select>
    </div>

    <div id="Test_Textarea_Set_and_Get_Text_Values">
        <h3></h3>
        <textarea cols="30" rows="10" c-model="content"></textarea>
    </div>

    <div id="Test_NonInput_Set_Values">
        <h3></h3>
        <span c-model-number="id"></span>
        <span c-model="name"></span>
    </div>

    <div id="Test_HtmlContent">
        <h3></h3>
        <div c-model="html"></div>
        <div c-model-html="html"></div>
    </div>

    <div id="Test_NonInput_Set_Values_use_Getter_Function">
        <h3></h3>
        <span c-model-number="id"></span>
        <span c-model="firstName"></span>
        <span c-model="lastName"></span>
        <span c-model="fullName"></span>
    </div>

    <div id="Test_Dazzle_Set_Values">
        <h3></h3>
        <a c-model-dazzle="href:url,text:text"></a>
    </div>

    <div id="Test_Dazzle_Set_Single_Value">
        <h3></h3>
        <a c-model-dazzle="href:url">軟體主廚的程式料理廚房</a>
    </div>

    <div id="Test_Dazzle_Set_and_Get_Text_and_Number_Values">
        <h3></h3>
        <input type="text" c-model-dazzle="value-number:id">
        <input type="text" c-model-dazzle="value:name,style:style">
    </div>

    <div id="Test_NestedObject_Set_and_Get_Text_and_Number_Values">
        <h3></h3>
        <input type="text" c-model-number="member.id">
        <input type="text" c-model="member.name">
        <input type="text" c-model="member.address.value">
    </div>

    <div id="Test_NestedObject_Set_and_Get_Text_and_Number_Values_with_Dazzle">
        <h3></h3>
        <input type="text" c-model-dazzle="value-number:member.id">
        <input type="text" c-model-dazzle="value:member.name,style:member.nameStyle">
        <input type="text" c-model-dazzle="value:member.address.value">
    </div>

    <div id="Test_Radio_Set_and_Get_Text_Value_with_Dazzle">
        <h3></h3>
        <input type="radio" name="time_Period" value="morning" c-model-dazzle="value:timePeriod" />早上
        <input type="radio" name="time_Period" value="noon" />中午
        <input type="radio" name="time_Period" value="night" />晚上
    </div>

    <div id="Test_Radio_Set_and_Get_Number_Value_with_Dazzle">
        <h3></h3>
        <input type="radio" name="amount" value="1" c-model-dazzle="value-number:amount" />1
        <input type="radio" name="amount" value="2" />2
        <input type="radio" name="amount" value="3" />3
    </div>

    <div id="Test_Checkbox_Set_and_Get_without_Value_with_Dazzle">
        <h3></h3>
        <input type="checkbox" c-model-dazzle="value:creamer" />奶精
        <input type="checkbox" c-model-dazzle="value:sugar" />糖
        <input type="checkbox" c-model-dazzle="value:cinnamonPowder" />肉桂粉
    </div>

    <div id="Test_Checkbox_Set_and_Get_with_Number_Values_and_Dazzle">
        <h3></h3>
        <input type="checkbox" value="1" c-model-dazzle="value-number:answer1" />1
        <input type="checkbox" value="2" c-model-dazzle="value-number:answer2" />2
        <input type="checkbox" value="3" c-model-dazzle="value-number:answer3" />3
    </div>

    <div id="Test_Checkbox_Set_and_Get_with_Text_Values_and_Dazzle">
        <h3></h3>
        <input type="checkbox" value="A" c-model-dazzle="value:answer1" />A
        <input type="checkbox" value="B" c-model-dazzle="value:answer2" />B
        <input type="checkbox" value="C" c-model-dazzle="value:answer3" />C
    </div>

    <div id="Test_Select_Set_and_Get_with_Text_Values_and_Dazzle">
        <h3></h3>
        <select c-model-dazzle="value:drink">
            <option value="coffee">Coffee</option>
            <option value="tea">Tea</option>
            <option value="me">Me</option>
        </select>
    </div>

    <div id="Test_Select_Set_and_Get_with_Number_Values_and_Dazzle">
        <h3></h3>
        <select c-model-dazzle="value-number:answer">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
        </select>
    </div>

    <div id="Test_Textarea_Set_and_Get_Text_Values_with_Dazzle">
        <h3></h3>
        <textarea cols="30" rows="10" c-model-dazzle="value:content"></textarea>
    </div>

    <div id="Test_AfterSet">
        <h3></h3>
        <span c-model-number="id"></span>
        <span c-model="name"></span>
    </div>

    <div id="Test_AfterSet_and_BeforeSet">
        <h3></h3>
        <span c-model-number="id"></span>
        <span c-model="name"></span>
    </div>

    <div id="Test_Models_Create_Elements">
        <h3></h3>
        <div class="container">
            <div style="display: none;">
                <input type="text" c-model-number="id">
                <input type="text" c-model="name">
            </div>
        </div>
    </div>

    <div id="Test_Models_Set_and_Get_Values_with_AfterSet">
        <h3></h3>
        <div class="container">
            <div style="display: none;">
                <input type="text" c-model-number="id">
                <input type="text" c-model="name">
            </div>
        </div>
    </div>

    <div id="Test_Models_Set_and_Get_Values_with_AfterSet_and_BeforeSet">
        <h3></h3>
        <div class="container">
            <div style="display: none;">
                <input type="text" c-model-number="id">
                <input type="text" c-model="name">
            </div>
        </div>
    </div>

    <div id="Test_Models_Upsert_Values">
        <h3></h3>
        <div class="container">
            <div style="display: none;">
                <input type="text" c-model-number="id">
                <input type="text" c-model="name">
            </div>
        </div>
    </div>

    <div id="Test_Models_Create_Elements_with_Dazzle">
        <h3></h3>
        <div class="container">
            <div style="display: none;">
                <input type="text" c-model-dazzle="value-number:id">
                <input type="text" c-model-dazzle="value:name">
            </div>
        </div>
    </div>

    <div id="Test_Models_Set_and_Get_Values_with_AfterSet_and_Dazzle">
        <h3></h3>
        <div class="container">
            <div style="display: none;">
                <input type="text" c-model-dazzle="value-number:id">
                <input type="text" c-model-dazzle="value:name">
            </div>
        </div>
    </div>

    <div id="Test_Models_Set_and_Get_Values_with_AfterSet_and_BeforeSet_and_Dazzle">
        <h3></h3>
        <div class="container">
            <div style="display: none;">
                <input type="text" c-model-dazzle="value-number:id">
                <input type="text" c-model-dazzle="value:name">
            </div>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="../src/jquery-model/jquery-model.js"></script>
    <script>
        var assert = {
            areEquals: function (expected, actual) {
                if (expected === actual) {
                    return true;
                }

                console.error("Test failed. expected: " + expected + ", actual: " + actual);

                return false;
            },
            areTrue: function (actual) {
                if (actual === true) {
                    return true;
                }

                console.error("Test failed. expected: true, actual: " + actual);

                return false;
            },
            areFalse: function (actual) {
                if (actual === false) {
                    return true;
                }

                console.error("Test failed. expected: false, actual: " + actual);

                return false;
            },
            testResults: function (assertions, testCase) {
                if (assertions.reduce(function (accu, next) { return accu && next; })) {
                    console.log("Test case: " + testCase + ", passed.")
                    $("#" + testCase).find("h3").css("color", "green").text(testCase)
                } else {
                    console.error("Test case: " + testCase + ", failed.")
                    $("#" + testCase).find("h3").css("color", "red").text(testCase)
                }
            }
        };

        var tests = [];

        tests.push(function () {
            var containerId = "Test_TextInput_Set_and_Get_Text_and_Number_values";

            var $container = $("#" + containerId);

            $container.model({ id: 1, name: "Johnny" });

            var model = $container.model();

            var assertions = [
                assert.areEquals(1, model.id),
                assert.areEquals("Johnny", model.name)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Model_Set_Values_use_KeyValue";

            var $container = $("#" + containerId);

            $container.model("id", 1);
            $container.model("name", "Johnny");

            var model = $container.model();

            var assertions = [
                assert.areEquals(1, model.id),
                assert.areEquals("Johnny", model.name)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Radio_Set_and_Get_Text_value";

            var $container = $("#" + containerId);

            $container.model({ timePeriod: "noon" });

            var model = $container.model();

            var assertions = [
                assert.areEquals("noon", model.timePeriod)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Radio_Set_and_Get_Number_value";

            var $container = $("#" + containerId);

            $container.model({ amount: 3 });

            var model = $container.model();

            var assertions = [
                assert.areEquals(3, model.amount)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Checkbox_Set_and_Get_without_Value";

            var $container = $("#" + containerId);

            $container.model({ creamer: false, sugar: true, cinnamonPowder: true });

            var model = $container.model();

            var assertions = [
                assert.areFalse(model.creamer),
                assert.areTrue(model.sugar),
                assert.areTrue(model.cinnamonPowder)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Checkbox_Set_and_Get_with_Number_Values";

            var $container = $("#" + containerId);

            $container.model({ answer1: 1, answer2: 2 });

            var model = $container.model();

            var assertions = [
                assert.areEquals(1, model.answer1),
                assert.areEquals(2, model.answer2),
                assert.areEquals(undefined, model.answer3)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Checkbox_Set_and_Get_with_Text_Values";

            var $container = $("#" + containerId);

            $container.model({ answer2: "B", answer3: "C" });

            var model = $container.model();

            var assertions = [
                assert.areEquals(undefined, model.answer1),
                assert.areEquals("B", model.answer2),
                assert.areEquals("C", model.answer3)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Select_Set_and_Get_with_Text_Values";

            var $container = $("#" + containerId);

            $container.model({ drink: "coffee" });

            var model = $container.model();

            var assertions = [
                assert.areEquals("coffee", model.drink)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Select_Set_and_Get_with_Number_Values";

            var $container = $("#" + containerId);

            $container.model({ answer: 2 });

            var model = $container.model();

            var assertions = [
                assert.areEquals(2, model.answer)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Textarea_Set_and_Get_Text_Values";

            var $container = $("#" + containerId);

            $container.model({ content: "An argyle (occasionally argyll) pattern is made of diamonds or lozenges." });

            var model = $container.model();

            var assertions = [
                assert.areEquals("An argyle (occasionally argyll) pattern is made of diamonds or lozenges.", model.content)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_NonInput_Set_Values";

            var $container = $("#" + containerId);

            $container.model({ id: 1, name: "Johnny" });

            var model = $container.model();

            var assertions = [
                assert.areEquals("1", $container.find("span[c-model-number='id']").text()),
                assert.areEquals("Johnny", $container.find("span[c-model='name']").text()),
                assert.areEquals(undefined, model.id),
                assert.areEquals(undefined, model.name)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_HtmlContent";

            var $container = $("#" + containerId);

            $container.model({ html: "<span>test</span>" });

            var model = $container.model();

            var assertions = [
                assert.areEquals("<span>test</span>", $container.find("div[c-model='html']").text()),
                assert.areEquals("test", $container.find("div[c-model-html='html']").text()),
                assert.areEquals(undefined, model.id),
                assert.areEquals(undefined, model.name)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_NonInput_Set_Values_use_Getter_Function";

            var $container = $("#" + containerId);

            $container.model({
                id: 1,
                firstName: "Johnny",
                lastName: "Chuang",
                get fullName() {
                    return this.firstName + ", " + this.lastName;
                }
            });

            var model = $container.model();

            var assertions = [
                assert.areEquals("Johnny", $container.find("span[c-model='firstName']").text()),
                assert.areEquals("Chuang", $container.find("span[c-model='lastName']").text()),
                assert.areEquals("Johnny, Chuang", $container.find("span[c-model='fullName']").text()),
                assert.areEquals(undefined, model.id),
                assert.areEquals(undefined, model.firstName),
                assert.areEquals(undefined, model.lastName),
                assert.areEquals(undefined, model.fullName)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Dazzle_Set_Values";

            var $container = $("#" + containerId);

            $container.model({ url: "https://dotblogs.com.tw/supershowwei", text: "軟體主廚的程式料理廚房" });

            var model = $container.model();

            var assertions = [
                assert.areEquals("https://dotblogs.com.tw/supershowwei", $container.find("a[c-model-dazzle]").attr("href")),
                assert.areEquals("軟體主廚的程式料理廚房", $container.find("a[c-model-dazzle]").text()),
                assert.areEquals(undefined, model.url),
                assert.areEquals(undefined, model.text)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Dazzle_Set_Single_Value";

            var $container = $("#" + containerId);

            $container.model({ url: "https://dotblogs.com.tw/supershowwei" });

            var model = $container.model();

            var assertions = [
                assert.areEquals("https://dotblogs.com.tw/supershowwei", $container.find("a[c-model-dazzle]").attr("href")),
                assert.areEquals(undefined, model.url),
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Dazzle_Set_and_Get_Text_and_Number_Values";

            var $container = $("#" + containerId);

            $container.model({ id: 1, name: "Johnny", style: "font-size: 20pt;" });

            var model = $container.model();

            var assertions = [
                assert.areEquals(1, model.id),
                assert.areEquals("Johnny", model.name),
                assert.areEquals("font-size: 20pt;", $container.find("input[c-model-dazzle*='style']").attr("style"))
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_NestedObject_Set_and_Get_Text_and_Number_Values";

            var $container = $("#" + containerId);

            $container.model({ member: { id: 1, name: "Johnny", address: { value: "my address" } } });

            var model = $container.model();

            var assertions = [
                assert.areEquals(1, model.member.id),
                assert.areEquals("Johnny", model.member.name),
                assert.areEquals("my address", model.member.address.value)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_NestedObject_Set_and_Get_Text_and_Number_Values_with_Dazzle";

            var $container = $("#" + containerId);

            $container.model({ member: { id: 1, name: "Johnny", nameStyle: "font-size: 20pt;", address: { value: "my address" } } });

            var model = $container.model();

            var assertions = [
                assert.areEquals(1, model.member.id),
                assert.areEquals("Johnny", model.member.name),
                assert.areEquals("my address", model.member.address.value),
                assert.areEquals("font-size: 20pt;", $container.find("input[c-model-dazzle*='nameStyle']").attr("style"))
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Radio_Set_and_Get_Text_Value_with_Dazzle";

            var $container = $("#" + containerId);

            $container.model({ timePeriod: "noon" });

            var model = $container.model();

            var assertions = [
                assert.areEquals("noon", model.timePeriod)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Radio_Set_and_Get_Number_Value_with_Dazzle";

            var $container = $("#" + containerId);

            $container.model({ amount: 3 });

            var model = $container.model();

            var assertions = [
                assert.areEquals(3, model.amount)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Checkbox_Set_and_Get_without_Value_with_Dazzle";

            var $container = $("#" + containerId);

            $container.model({ creamer: false, sugar: true, cinnamonPowder: true });

            var model = $container.model();

            var assertions = [
                assert.areFalse(model.creamer),
                assert.areTrue(model.sugar),
                assert.areTrue(model.cinnamonPowder)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Checkbox_Set_and_Get_with_Number_Values_and_Dazzle";

            var $container = $("#" + containerId);

            $container.model({ answer1: 1, answer2: 2 });

            var model = $container.model();

            var assertions = [
                assert.areEquals(1, model.answer1),
                assert.areEquals(2, model.answer2),
                assert.areEquals(undefined, model.answer3)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Checkbox_Set_and_Get_with_Text_Values_and_Dazzle";

            var $container = $("#" + containerId);

            $container.model({ answer2: "B", answer3: "C" });

            var model = $container.model();

            var assertions = [
                assert.areEquals(undefined, model.answer1),
                assert.areEquals("B", model.answer2),
                assert.areEquals("C", model.answer3)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Select_Set_and_Get_with_Text_Values_and_Dazzle";

            var $container = $("#" + containerId);

            $container.model({ drink: "coffee" });

            var model = $container.model();

            var assertions = [
                assert.areEquals("coffee", model.drink)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Select_Set_and_Get_with_Number_Values_and_Dazzle";

            var $container = $("#" + containerId);

            $container.model({ answer: 2 });

            var model = $container.model();

            var assertions = [
                assert.areEquals(2, model.answer)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Textarea_Set_and_Get_Text_Values_with_Dazzle";

            var $container = $("#" + containerId);

            $container.model({ content: "An argyle (occasionally argyll) pattern is made of diamonds or lozenges." });

            var model = $container.model();

            var assertions = [
                assert.areEquals("An argyle (occasionally argyll) pattern is made of diamonds or lozenges.", model.content)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_AfterSet";

            var $container = $("#" + containerId);

            $container.model({ id: 1, name: "Johnny" }, function ($self, setter) {
                $self.append($("<p>").text("after set"));
            });

            var assertions = [
                assert.areEquals("after set", $container.find("p").text())
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_AfterSet_and_BeforeSet";

            var $container = $("#" + containerId);

            $container.model({ id: 1, name: "Johnny" }, {
                beforeSet: function ($self, setter) {
                    $self.append($("<p id=\"before\">").text("before set"));
                }, afterSet: function ($self, setter) {
                    $self.append($("<p id=\"after\">").text("after set"));
                }
            });

            var assertions = [
                assert.areEquals("before set", $container.find("#before").text()),
                assert.areEquals("after set", $container.find("#after").text())
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Models_Create_Elements";

            var $container = $("#" + containerId);

            $container.find(".container").models([{ id: 1, name: "Johnny" }, { id: 2, name: "Tom" }], $container.find(".container > div").first().remove().show());

            var assertions = [
                assert.areEquals(2, $container.find(".container > div").length)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Models_Set_and_Get_Values_with_AfterSet";

            var $container = $("#" + containerId);

            $container.find(".container").models([{ id: 1, name: "Johnny" }, { id: 2, name: "Tom" }], $container.find(".container > div").first().remove(), function ($self, setter) {
                $self.show();
            });

            $container.find(".container > div").models([{ id: 1, name: "Johnny1" }, { id: 2, name: "Tom2" }], "id");

            var models = $container.find(".container > div").models();

            var assertions = [
                assert.areEquals(2, $container.find(".container > div").length),
                assert.areEquals(2, $container.find(".container > div:visible").length),
                assert.areEquals(1, models[0].id),
                assert.areEquals("Johnny1", models[0].name),
                assert.areEquals(2, models[1].id),
                assert.areEquals("Tom2", models[1].name)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Models_Set_and_Get_Values_with_AfterSet_and_BeforeSet";

            var $container = $("#" + containerId);

            $container.find(".container").models([{ id: 1, name: "Johnny" }, { id: 2, name: "Tom" }], $container.find(".container > div").first().remove(), {
                beforeSet: function ($self, setter) {
                    $self.append($("<p id=\"before\">").text("before set"));
                },
                afterSet: function ($self, setter) {
                    $self.show();
                }
            });

            $container.find(".container > div").models([{ id: 1, name: "Johnny1" }, { id: 2, name: "Tom2" }], "id");

            var models = $container.find(".container > div").models();

            var assertions = [
                assert.areEquals(2, $container.find("#before").length),
                assert.areEquals(2, $container.find(".container > div").length),
                assert.areEquals(2, $container.find(".container > div:visible").length),
                assert.areEquals(1, models[0].id),
                assert.areEquals("Johnny1", models[0].name),
                assert.areEquals(2, models[1].id),
                assert.areEquals("Tom2", models[1].name)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Models_Upsert_Values";

            var $container = $("#" + containerId);

            $container.find(".container").models([{ id: 1, name: "Johnny" }, { id: 2, name: "Tom" }], $container.find(".container > div").first().remove().show());

            var data = [{ id: 1, name: "Johnny1" }, { id: 2, name: "Tom2" }, { id: 3, name: "Pentel" }];

            $container.find(".container > div").models(data, "id");

            $container.find(".container").models(data.filter(function (dataItem) {
                return !$container.find(".container > div").models().contains(function (modelItem) {
                    return modelItem.id === dataItem.id;
                })
            }), $container.find(".container > div").first());

            var models = $container.find(".container > div").models();

            var assertions = [
                assert.areEquals(3, $container.find(".container > div").length),
                assert.areEquals(3, $container.find(".container > div:visible").length),
                assert.areEquals(1, models[0].id),
                assert.areEquals("Johnny1", models[0].name),
                assert.areEquals(2, models[1].id),
                assert.areEquals("Tom2", models[1].name),
                assert.areEquals(3, models[2].id),
                assert.areEquals("Pentel", models[2].name)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Models_Create_Elements_with_Dazzle";

            var $container = $("#" + containerId);

            $container.find(".container").models([{ id: 1, name: "Johnny" }, { id: 2, name: "Tom" }], $container.find(".container > div").first().remove().show());

            var assertions = [
                assert.areEquals(2, $container.find(".container > div").length)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Models_Set_and_Get_Values_with_AfterSet_and_Dazzle";

            var $container = $("#" + containerId);

            $container.find(".container").models([{ id: 1, name: "Johnny" }, { id: 2, name: "Tom" }], $container.find(".container > div").first().remove(), function ($self, setter) {
                $self.show();
            });

            $container.find(".container > div").models([{ id: 1, name: "Johnny1" }, { id: 2, name: "Tom2" }], "id");

            var models = $container.find(".container > div").models();

            var assertions = [
                assert.areEquals(2, $container.find(".container > div").length),
                assert.areEquals(2, $container.find(".container > div:visible").length),
                assert.areEquals(1, models[0].id),
                assert.areEquals("Johnny1", models[0].name),
                assert.areEquals(2, models[1].id),
                assert.areEquals("Tom2", models[1].name)
            ];

            assert.testResults(assertions, containerId);
        });

        tests.push(function () {
            var containerId = "Test_Models_Set_and_Get_Values_with_AfterSet_and_BeforeSet_and_Dazzle";

            var $container = $("#" + containerId);

            $container.find(".container").models([{ id: 1, name: "Johnny" }, { id: 2, name: "Tom" }], $container.find(".container > div").first().remove(), {
                beforeSet: function ($self, setter) {
                    $self.append($("<p id=\"before\">").text("before set"));
                },
                afterSet: function ($self, setter) {
                    $self.show();
                }
            });

            $container.find(".container > div").models([{ id: 1, name: "Johnny1" }, { id: 2, name: "Tom2" }], "id");

            var models = $container.find(".container > div").models();

            var assertions = [
                assert.areEquals(2, $container.find("#before").length),
                assert.areEquals(2, $container.find(".container > div").length),
                assert.areEquals(2, $container.find(".container > div:visible").length),
                assert.areEquals(1, models[0].id),
                assert.areEquals("Johnny1", models[0].name),
                assert.areEquals(2, models[1].id),
                assert.areEquals("Tom2", models[1].name)
            ];

            assert.testResults(assertions, containerId);
        });

        //tests[tests.length - 1]();

        tests.forEach(function (test) {
            test();
        });
    </script>
</body>

</html>