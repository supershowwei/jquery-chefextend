function findKeyElement(e,t){var r="[c-model='"+t+"'],[c-model-number='"+t+"'],[c-model-dazzle*='value:"+t+"'],[c-model-dazzle*='value-number:"+t+"']";return e.find(r).addBack(r)}function resolveModelValue(e,t){if(null!=t){if(/[^\.]\.[^\.]/.test(e)){var r=e.indexOf(".");return resolveModelValue(e.substr(r+1),t[e.substr(0,r)])}return t[e]}}function buildModelValue(e,t,r){var n,i;/[^\.]\.[^\.]/.test(e)?(n=e.indexOf("."),void 0!==r[i=e.substr(0,n)]&&null!==r[i]||(r[i]={}),buildModelValue(e.substr(n+1),t,r[i])):r[e]=t}function getContents(e){if(null!=e)return e.constructor===Function?e():e}jQuery.fn.extend({visible:function(){return this.css("visibility","")},invisible:function(){return this.css("visibility","hidden")},toggleVisibility:function(){return this.css("visibility",function(e,t){return"hidden"===t?"":"hidden"})},disable:function(){return this.prop("disabled",!0)},enable:function(){return this.prop("disabled",!1)},toggleDisabled:function(){return this.prop("disabled",function(e,t){return!t})},selected:function(){return this.prop("selected",!0)},unselected:function(){return this.prop("selected",!1)},toggleSelected:function(){return this.prop("selected",function(e,t){return!t})}}),function(n){n.extend({http:{beforeSend:function(e){return e&&e(),this},get:function(e,t){return(t=t||{}).method="GET",n.ajax(e,t)},post:function(e,t,r){return(r=r||{}).method="POST",(r.data=t).constructor===FormData&&(r.cache=!1,r.contentType=!1,r.processData=!1),n.ajax(e,r)},put:function(e,t,r){return(r=r||{}).method="PUT",r.data=t,n.ajax(e,r)},patch:function(e,t,r){return(r=r||{}).method="PATCH",r.data=t,n.ajax(e,r)},delete:function(e,t){return(t=t||{}).method="DELETE",n.ajax(e,t)}}})}(jQuery),String.prototype.startsWith||(String.prototype.startsWith=function(e,t){return this.substring(!t||t<0?0:+t,e.length)===e}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){return(void 0===t||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Array.prototype.contains||(Array.prototype.contains=function(e,t){var r=this,n=r.length,i=-1;if(void 0===t){for(;++i!==n;)if(i in r&&e(r[i],i,r))return!0}else for(;++i!==n;)if(i in r&&e.call(t,r[i],i,r))return!0;return!1}),function(h){h.expr[":"].attrStartsWith=h.expr.createPseudo(function(i){return function(e,t,r){for(var n=e.attributes.length-1;0<=n;n--)if(e.attributes[n].name.startsWith(i))return!0;return!1}}),h.expr[":"].attrEndsWith=h.expr.createPseudo(function(i){return function(e,t,r){for(var n=e.attributes.length-1;0<=n;n--)if(e.attributes[n].name.endsWith(i))return!0;return!1}}),h.extend({jqModel:{toNumber:function(e){return isNaN(e)?void 0:Number(e)}}}),h.fn.extend({getModelValue:function(){return this.is(":radio")?h("input[type='radio'][name='"+this.attr("name")+"']:checked").val():this.is(":checkbox")?this.attr("value")?this.prop("checked")?this.val():void 0:this.prop("checked"):this.val()},setModelValue:function(e){this.is(":radio")?h("input[type='radio'][name='"+this.attr("name")+"'][value='"+e+"']").prop("checked",!0):this.is(":checkbox")?this.attr("value")?this.prop("checked",this.val()===e.toString()):this.prop("checked",e):this.val(e)},model:function(d,e,t){var r,n=this.find(":attrStartsWith('c-model')").addBack(":attrStartsWith('c-model')");if(0!==n.length){if(!d){var s={};return h.each(n,function(e,t){var r=h(t);if(r.is(":input"))for(var n=t.attributes.length-1;0<=n;n--){var i=t.attributes[n];if(i.name.startsWith("c-model")){if("c-model-dazzle"===i.name){var o,u,a,l=/,(value|value-number):([^:,]+)/.exec(i.value)||/^(value|value-number):([^:,]+)/.exec(i.value);l&&(o=l[1],void 0===resolveModelValue(u=l[2],s)&&void 0!==(a=r.getModelValue())&&buildModelValue(u,"value-number"===o?h.jqModel.toNumber(a):a,s));break}void 0===resolveModelValue(i.value,s)&&void 0!==(a=r.getModelValue())&&("c-model-number"===i.name?buildModelValue(i.value,h.jqModel.toNumber(a),s):buildModelValue(i.value,a,s));break}}}),s}d.constructor===String?((r={})[d]=e,d=r):d.constructor===Object&&(t=e);var i=void 0;return t&&t.constructor===Object&&(i=t.beforeSet,t=t.afterSet),i&&i.constructor===Function&&i(this,d),h.each(n,function(e,t){for(var r=t.attributes.length-1;0<=r;r--){var n=t.attributes[r];if(n.name.startsWith("c-model")){var i,o=h(t);if("c-model-dazzle"===n.name){var u=/([^:,]+):([^:,]+)/g,a=void 0;do{if(a=u.exec(n.value)){var l,s=a[1];if(void 0!==(l=resolveModelValue(a[2],d)))switch(s){case"text":o.text(getContents(l));break;case"html":o.html(getContents(l));break;case"value":case"value-number":o.is(":input")?o.setModelValue(l):o.attr("value",l);break;default:o.attr(s,getContents(l))}}}while(a);break}if("c-model-html"===n.name){void 0!==(i=getContents(resolveModelValue(n.value,d)))&&o.html(i);break}o.is(":input")?void 0!==(l=resolveModelValue(n.value,d))&&o.setModelValue(l):void 0!==(i=getContents(resolveModelValue(n.value,d)))&&o.text(i);break}}}),t&&t.constructor===Function&&t(this,d),this}},models:function(e,r,o){var n,u=this;if(0!==u.length){if(!e){var i=[];return h.each(u,function(e,t){i.push(h(t).model())}),i}if(e.constructor===Object)for(var a,t=e[a=r].toString(),l=0;l<u.length;l++){if(findKeyElement(s=h(u[l]),a).getModelValue()===t){s.model(e,o);break}}else if(e.constructor===Array){r.constructor===String?(a=r,h.each(e,function(e,t){for(var r=t[a].toString(),n=0;n<u.length;n++){var i=h(u[n]);if(findKeyElement(i,a).getModelValue()===r){i.model(t,o);break}}n<u.length&&u.splice(n,1)})):r instanceof jQuery&&(n=h(u),h.each(e,function(e,t){r.clone().model(t,o).appendTo(n)}))}else for(var s,d=e,c=r.toString(),l=0;l<u.length;l++){if(findKeyElement(s=h(u[l]),d).getModelValue()===c)return s.model()}return this}}})}(jQuery);